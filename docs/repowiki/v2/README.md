# Wiki 自动生成方案文档库

> 通用的、自动化的、高质量的代码仓库文档生成系统设计方案

## 📚 文档目录

### 核心方案

1. **[00-main-plan.md](./00-main-plan.md)** - 主方案文档
   - 方案概述
   - 核心设计理念
   - 阶段1-3 详细设计
   - 自动化提示词
   - 增强功能
   - 技术实现建议

2. **[01-phase0-project-profile.md](./01-phase0-project-profile.md)** ⭐ 新增
   - 阶段0: 项目画像与上下文建立
   - 技术栈深度识别 (三层)
   - 架构模式推断
   - 业务层次划分
   - 文档结构定制
   - 领域知识库加载

---

## 🎯 方案架构

### 四阶段流程

```mermaid
graph LR
    A[阶段0: 项目画像<br/>15-20min] --> B[阶段1: 结构分析<br/>15-20min]
    B --> C[阶段2: 深度挖掘<br/>30-40min]
    C --> D[阶段3: 文档生成<br/>40-50min]

    style A fill:#ff6b6b,color:#fff
```

**总耗时**: 约 100-130 分钟 (1.5-2 小时)

---

## 📖 快速导航

### 按关注点查看

#### 🎨 项目画像相关
- [技术栈识别](./01-phase0-project-profile.md#-step-01-技术栈深度识别)
- [架构模式推断](./01-phase0-project-profile.md#-step-02-架构模式深度推断)
- [业务层次划分](./01-phase0-project-profile.md#-step-03-业务层次自动划分)
- [文档结构定制](./01-phase0-project-profile.md#-step-04-文档结构动态定制)
- [知识库加载](./01-phase0-project-profile.md#-step-05-领域知识库加载)

#### 📊 分析相关
- [结构分析](./00-main-plan.md#-阶段1-智能结构分析-15-20分钟)
- [深度挖掘](./00-main-plan.md#-阶段2-深度模块挖掘-30-40分钟)

#### 📝 生成相关
- [文档生成](./00-main-plan.md#-阶段3-结构化文档生成-40-50分钟)
- [文档模板](./00-main-plan.md#核心文档模板)

#### 🤖 自动化相关
- [主提示词](./00-main-plan.md#-自动化提示词设计)
- [质量检查](./00-main-plan.md#质量检查清单)

---

## 🌟 核心特性

### 项目画像 (阶段0) ⭐ 新增

- **三层技术栈识别**: 语言 → 框架 → 架构模式
- **架构自动推断**: MVC/DDD/微服务/文件路由等
- **业务结构提取**: 路由/API/数据模型/组件树
- **动态模板选择**: 6+ 种项目类型专用模板
- **知识库整合**: 框架最佳实践和反模式

### 智能分析

- **优先级算法**: 自动识别核心模块
- **依赖分析**: 生成模块依赖图
- **数据流追踪**: 追踪关键数据流转
- **设计模式识别**: 识别常用设计模式

### 高质量生成

- **图示优先**: 架构图、流程图、序列图
- **代码实证**: 所有结论引用源码位置
- **多维检查**: 完整性/准确性/可读性
- **增量更新**: 支持文档随代码演进

---

## 📂 支持的项目类型

### 前端项目
- ✅ Next.js (App Router / Pages Router)
- ✅ Nuxt
- ✅ Remix
- ✅ React (基础)
- ✅ Vue (基础)
- ✅ Angular

### 后端项目
- ✅ NestJS
- ✅ Express
- ✅ Django
- ✅ FastAPI

### CLI 工具
- ✅ Commander.js
- ✅ Oclif
- ✅ Ink (终端 UI)

### 跨端项目
- ✅ Taro
- ✅ Uni-app
- ✅ React Native

### Monorepo
- ✅ Turborepo
- ✅ Nx
- ✅ pnpm workspace

---

## 🚀 使用流程

### 1. 执行命令

```bash
neo /repowiki
# 或
neo "生成项目完整文档"
```

### 2. 自动分析

系统将自动:
- 识别项目类型和技术栈
- 分析架构模式
- 提取业务结构
- 选择文档模板
- 加载知识库

### 3. 生成文档

输出到 `repowiki/` 目录:
```
repowiki/
├── 00-project-profile.json      # 项目画像
├── 00-project-profile.md        # 可读报告
├── architecture/                # 架构文档
├── core-modules/                # 核心模块
├── workflows/                   # 流程文档
└── ...                          # 其他章节
```

### 4. 质量检查

自动执行:
- ✅ 完整性检查 (核心模块覆盖)
- ✅ 准确性检查 (代码引用准确)
- ✅ 可读性检查 (结构清晰)
- ✅ 价值检查 (新人可上手)

---

## 📈 预期收益

- 🕐 文档编写时间成本: 手工编写 3-5天（中型项目） → 2-3小时自动生成（11-15倍效率）
- 📊 文档质量: 提升50-70%（结构化、实证化）
  - ✅ **完整性**: 核心模块 100% 覆盖
  - ✅ **准确性**: 代码引用精确到行号
  - ✅ **实用性**: 包含最佳实践和常见模式
  - ✅ **可维护**: 支持增量更新
- 👥 新人上手: 3天摸索 → 0.5天快速上手（4-6倍效率）
- 🔧 维护成本: 估算降低60%（增量更新策略）

---

## 🔄 版本历史

### v2.0 (2025-10-24)
- ✅ **新增阶段0**: 项目画像与上下文建立
- ✅ **三层技术栈识别**: 语言→框架→架构
- ✅ **动态模板选择**: 6种项目类型专用模板
- ✅ **知识库整合**: 最佳实践和反模式
- ✅ **业务结构提取**: 路由/API/数据模型

### v1.0 (2025-10-24)
- ✅ 三阶段流程设计
- ✅ 文档模板系统
- ✅ 自动化提示词
- ✅ 质量检查机制

---

## 💡 设计原则

1. **上下文优先** - 深度理解项目后再生成
2. **定制化** - 根据项目特点选择最佳方案
3. **实用性** - 不仅是文档,更是学习资料
4. **可追溯** - 所有结论有代码实证
5. **可演进** - 支持增量更新

---

## 📚 相关资源

### 参考实现
- [Neovate Code 文档优化实践](../arch.md)
- [现有 repowiki 命令](../../.neovate/commands/repowiki.md)

### 技术文档
- [Next.js 文档](https://nextjs.org/docs)
- [NestJS 文档](https://docs.nestjs.com)
- [文档工程最佳实践](https://documentation.divio.com/)

---

## 🤝 贡献

欢迎贡献:
- 📝 新的项目类型模板
- 🎓 技术栈知识库
- 🐛 问题反馈
- 💡 功能建议

---

## 📞 反馈

如有问题或建议,请:
- 查看 [主方案文档](./00-main-plan.md)
- 查看 [阶段0 详细说明](./01-phase0-project-profile.md)
- 提交 Issue 或 PR

---

**让文档生成更智能、更贴合、更有价值!** 🚀
