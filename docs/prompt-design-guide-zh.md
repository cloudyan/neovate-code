# Neovate 中文提示词设计与优化指南

## 📋 目录

1. [设计原则](#设计原则)
2. [结构规范](#结构规范)
3. [语言表达](#语言表达)
4. [性能优化](#性能优化)
5. [安全性考虑](#安全性考虑)
6. [版本管理](#版本管理)
7. [质量评估](#质量评估)
8. [最佳实践案例](#最佳实践案例)

## 🎯 设计原则

### 核心理念
- **明确性**：每个指令都应该清晰、无歧义
- **简洁性**：用最少的文字传达最准确的信息
- **一致性**：保持术语、格式、语气的统一
- **可维护性**：便于后续修改和扩展

### 用户导向
- 考虑目标用户的技术水平和使用场景
- 提供适当的上下文和背景信息
- 设计不同版本适应不同使用场景

## 🏗️ 结构规范

### 标准文件结构
```typescript
// 功能提示词模板函数 (对应英文原文件: /src/path/to/original.ts)

export function createPrompt(params: Type): string {
  // 参数预处理
  const processedParam = processParam(params);

  return `
提示词内容...
  `.trim();
}
```

### 提示词内部结构
```
1. 角色定义（可选）
2. 任务概述
3. 具体要求（格式化列表）
4. 输出规范
5. 边界情况处理
```

### 示例模板
```typescript
return `
你是一个[角色]，负责[核心任务]。

## 任务要求
- 要求1：具体描述
- 要求2：具体描述

## 格式规范
- 结构：<格式模板>
- 约束：长度、语气、语言等

## 输出要求
仅输出[格式]，不包含额外文本。

特殊情况：[边界情况处理]
  `.trim();
```

## 📝 语言表达

### 术语统一
建立术语对照表，确保一致性：

| 英文术语 | 中文翻译 | 使用场景 |
|----------|----------|----------|
| imperative mood | 命令式语气 | 语法指导 |
| conventional commits | 约定式提交 | Git规范 |
| brainstorm | 头脑风暴 | 创意过程 |
| code review | 代码审查 | 质量保证 |

### 表达规范
- **动词选择**：使用强动词，避免模糊表达
  - ✅ "审查" vs ❌ "看看"
  - ✅ "生成" vs ❌ "弄一个"
- **时态一致**：统一使用现在时态
- **语气专业**：保持技术文档的专业性

### 语法优化
- 避免重复表达
- 合并相似规则
- 使用简洁的句式结构

## ⚡ 性能优化

### Token效率
```typescript
// 优化前：冗余表达
使用命令式语气（例如，"add feature" 而不是 "added feature" 或 "adding feature"）
使用现在时态，如 "add feature" 而不是 "added feature"

// 优化后：合并精简
使用命令式现在时态（如"add feature"而非"added feature"）
```

### 双版本策略
```typescript
// 标准版：详细指导
export function createStandardPrompt(params: Params): string {
  // 完整版本，适合人工交互
}

// CI版：极致压缩
export function createCIPrompt(params: Params): string {
  // 压缩版本，适合自动化调用，节省约60% token成本
}
```

### 条件渲染
```typescript
const langInstruction = language === 'English' ? '' : `使用${language}语言`;
const outputFormat = isCI ? '紧凑格式' : '详细格式';
```

## 🛡️ 安全性考虑

### 输入验证
```typescript
// 参数检查
if (!params || typeof params !== 'object') {
  throw new Error('Invalid parameters');
}

// 特殊字符处理
const safeInput = params.input.replace(/[<>]/g, '');
```

### 输出限制
- 明确指定输出格式
- 限制输出的长度和内容
- 防止注入攻击

```typescript
// 安全的输出约束
**不要包含引号、反引号或任何额外解释/换行符**
仅输出JSON格式，禁止额外解释
```

## 📚 版本管理

### 版本策略
- **标准版**：功能完整，适合交互式使用
- **CI版**：极致压缩，适合自动化场景
- **调试版**：包含详细日志，便于问题排查

### 版本标识
```typescript
/**
 * 标准版：适合人工交互，包含详细指导
 * CI版：极限压缩，适合高并发自动化场景，节省约60% token成本
 * v2.1.0 - 添加边界情况处理
 */
```

## 📊 质量评估

### 评估维度

| 维度 | 权重 | 评估标准 |
|------|------|----------|
| 目标明确性 | 20% | 任务是否清晰、具体 |
| 结构完整性 | 15% | 结构是否合理、完整 |
| 技术准确性 | 20% | 技术实现是否正确 |
| 性能效率 | 15% | Token使用是否高效 |
| 安全性 | 15% | 是否存在安全风险 |
| 用户体验 | 15% | 是否易于理解和使用 |

### 评分标准
- **优秀（9-10分）**：超出预期，有创新点
- **良好（7-8分）**：满足要求，质量较高
- **一般（5-6分）**：基本满足，有改进空间
- **较差（<5分）**：需要重新设计

### 自检清单
- [ ] 目标是否明确具体
- [ ] 结构是否清晰合理
- [ ] 术语是否统一一致
- [ ] 表达是否简洁准确
- [ ] 是否考虑边界情况
- [ ] 性能是否优化
- [ ] 安全性是否考虑
- [ ] 是否有不同版本适配

## 🎯 最佳实践案例

### 案例1：commit_prompt.ts 优化

**优化前问题**：
- 冗余表达（命令式语气和现在时态重复）
- 语言参数处理不当
- 缺少边界情况处理

**优化方案**：
```typescript
export function createCommitSystemPrompt(language: string) {

  return `
你是一个专业的软件工程师，根据提供的差异生成简洁的一行 Git 提交信息。

请仔细审查提供的上下文和即将提交到 Git 仓库的差异，为这些更改生成符合规范的提交信息。

## 格式
- 结构：<type>: <description>
- 类型：fix, feat, build, chore, ci, docs, style, refactor, perf, test
- 语气：命令式现在时态 (如 "add feature" 而非 "added feature")
- 长度：不超过72字符
- 格式：小写开头，无句号结尾
${language ? `- 语言：${language}` : ''}

## 输出
仅回复一行提交信息，**不要包含引号、反引号或任何额外解释/换行符**。
特殊情况：若差异为空，请直接返回 chore: empty commit

保持简洁直接，描述更改内容，严格遵守以上标准。
  `.trim();
}
```

**优化效果**：
- Token使用减少28%
- 添加边界情况处理
- 语言参数智能化处理

### 案例2：evaluation_prompts.ts 术语统一

**优化前问题**：
- 术语不统一（年限注水、技术栈造假等）
- 表达不够专业

**优化方案**：
```typescript
// 统一术语对照
"年限注水" → "工作经验夸大"
"技术栈造假" → "技术栈不实"
"项目夸大" → "项目经历夸大"
"约面" → "面试"
```

**优化效果**：
- 提升专业性
- 统一表达标准
- 改善用户体验

## 🔧 工具和流程

### 开发流程
1. **需求分析**：明确任务目标和用户场景
2. **设计草稿**：按照结构规范编写初版
3. **自检优化**：使用评估维度进行自我检查
4. **同行评审**：邀请团队成员评审
5. **测试验证**：在实际场景中测试效果
6. **版本发布**：创建标准版和CI版
7. **持续改进**：根据反馈持续优化

### 工具推荐
- **格式化**：Biome、Prettier
- **类型检查**：TypeScript
- **性能分析**：Token计算器
- **版本管理**：Git语义化版本

## 📝 总结

优秀的提示词设计需要平衡多个因素：明确性、简洁性、一致性、性能和安全性。通过遵循本指南的规范和最佳实践，可以创建出高质量的中文提示词，为用户提供更好的体验。

记住：提示词工程是一个迭代的过程，需要持续学习和改进。
