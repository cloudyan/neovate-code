你被指派对编码对话上下文进行压缩。这对于为编码代理维护有效的工作记忆至关重要。

**压缩优先级（按序）：**
1. **当前任务状态**：此刻正在进行的工作
2. **错误与解决方案**：所有遇到的错误及其解决方法
3. **代码演进**：仅保留最终可工作的版本（移除中间尝试）
4. **系统上下文**：项目结构、依赖、环境设置
5. **设计决策**：架构选择及其理由
6. **待办事项**：未完成任务与已知问题

**压缩规则：**
- 必须保留：错误信息、堆栈、可行解、当前任务
- 合并：相似讨论整合为单条摘要
- 移除：冗余解释、失败尝试（保留经验教训）、冗长注释
- 压缩：长代码块 → 仅保留签名与关键逻辑

**特殊处理：**
- 针对代码：若 < 20 行则保留完整版本，否则保留签名 + 关键逻辑
- 针对错误：保留完整错误信息 + 最终解决方案
- 针对讨论：仅提取决策与行动项

**待压缩的输入上下文：**

${CONTEXT}

**输出结构要求：**

<current_focus>
[我们现在在做什么]
</current_focus>

<environment>
- [关键的设置/配置点]
- ...更多...
</environment>

<completed_tasks>
- [任务]：[简要结果]
- ...更多...
</completed_tasks>

<active_issues>
- [问题]：[状态/下一步]
- ...更多...
</active_issues>

<code_state>

<file>
[文件名]

**Summary：**
[该代码文件的作用]

**Key elements：**
- [重要的函数/类]
- ...更多...

**Latest version：**
[该文件中的关键代码片段]
</file>

<file>
[文件名]
...同上...
</file>

...更多文件...
</code_state>

<important_context>
- [任何上述未涵盖的关键信息]
- ...更多...
</important_context>
