# 项目画像报告

## 项目基本信息

- **项目名称**: Neovate Code
- **项目描述**: 一个编码代理，用于增强开发工作流程
- **版本**: 0.14.0
- **主要技术栈**: TypeScript, React, Ink, Fastify
- **主要功能**: 代码生成、错误修复、代码审查、测试添加等

## 项目结构概览

```
neovate-code/
├── src/                     # 核心源码目录
│   ├── commands/           # 命令行命令实现
│   ├── tools/              # 工具实现（bash, edit, read, write, grep, glob, fetch, todo）
│   ├── ui/                 # 终端UI组件
│   ├── slash-commands/     # 内置斜杠命令
│   ├── mcp.ts              # Model Context Protocol 集成
│   ├── context.ts          # 全局上下文管理和依赖注入容器
│   ├── project.ts          # 项目核心逻辑
│   ├── session.ts          # 会话管理
│   ├── tool.ts             # 工具系统
│   └── ...
├── browser/                # 浏览器端UI
├── docs/                   # 文档
├── package.json            # 项目配置
└── README.md              # 项目介绍
```

## 核心模块分析

### 1. Context 上下文管理
- **文件**: `src/context.ts`
- **职责**: 作为依赖注入容器，管理所有核心依赖（配置、插件、路径、MCP 等）
- **设计模式**: 依赖注入容器模式、工厂模式、单例模式

### 2. Project 项目核心
- **文件**: `src/project.ts`
- **职责**: 管理会话、处理消息发送、执行AI交互循环
- **核心功能**: 消息发送、规划模式、工具审批逻辑

### 3. 工具系统
- **文件**: `src/tools/`
- **职责**: 实现各种工具（bash, edit, read, write, grep, glob, fetch, todo）
- **特点**: 动态解析、基于上下文和权限

### 4. MCP 集成
- **文件**: `src/mcp.ts`
- **职责**: Model Context Protocol 集成，连接外部AI服务

### 5. 斜杠命令
- **文件**: `src/slash-commands/`
- **职责**: 实现内置命令，可通过斜杠访问

### 6. 会话管理
- **文件**: `src/session.ts`
- **职责**: 处理会话持久化和恢复

## 项目架构特点

1. **模块化架构**: 代码库遵循模块化架构，职责分离清晰
2. **依赖注入**: 通过Context系统实现依赖注入，提高可测试性和可扩展性
3. **插件系统**: 支持插件扩展，可通过钩子机制扩展功能
4. **工具系统**: 动态工具解析，支持读写权限控制
5. **会话管理**: 完善的会话持久化和恢复机制
6. **MCP支持**: 集成Model Context Protocol，支持外部AI服务

## 技术亮点

1. **终端UI**: 基于Ink的React终端UI，提供良好的交互体验
2. **多模型支持**: 支持多种LLM提供商（OpenAI, Anthropic, Google等）
3. **智能路由**: 自动选择最适合任务的AI模型
4. **工具审批**: 完善的工具调用审批机制，保障安全
5. **配置管理**: 多层次配置管理（命令行、项目、全局）

## 部署和运行

- **运行方式**: 命令行工具，支持交互式和安静模式
- **安装方式**: npm全局安装
- **构建工具**: Bun
- **测试框架**: Vitest

## 项目质量评估

- **代码质量**: 高，有完整的类型定义和严格的TypeScript配置
- **测试覆盖**: 有单元测试，使用Vitest
- **文档完整度**: 有基础文档，但可进一步完善
- **可维护性**: 高，模块化设计，职责清晰

## 下一步建议

1. 深入分析核心模块的实现细节
2. 理解工具系统的完整工作流程
3. 分析MCP集成的具体实现方式
4. 研究会话管理和持久化机制
5. 了解斜杠命令的实现和扩展机制
